/* frontend/src/modules/Agreements/AgreementDetail.css */
.agreement-detail-container {
  padding: 24px;
}

.agreement-header-card {
  margin-bottom: 16px;
}

.agreement-header-card .ant-card-body {
  padding: 16px;
}

.agreement-header-content {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: 16px;
  flex-wrap: wrap;
}

.agreement-header-left {
  display: flex;
  align-items: center;
  gap: 16px;
  flex: 1;
  min-width: 0;
}

.agreement-title-section {
  display: flex;
  align-items: center;
  gap: 12px;
  flex-wrap: wrap;
}

.agreement-title {
  margin: 0;
  font-size: 20px;
  font-weight: 600;
}

.agreement-actions {
  display: flex;
  flex-wrap: wrap;
}

.agreement-document-container {
  background: #fff;
  padding: 24px;
  border-radius: 8px;
}

.agreement-details-card .ant-descriptions-item-label {
  font-weight: 500;
  background: rgba(0, 0, 0, 0.02);
}

.parties-list {
  display: flex;
  flex-direction: column;
  gap: 12px;
}

/* КРИТИЧНО: Стили для карточек сторон */
.party-card {
  background: #ffffff !important;
  border: 1px solid #d9d9d9 !important;
}

.party-card .ant-card-body {
  background: #ffffff !important;
  color: #333 !important;
}

.party-info {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.party-role .ant-tag {
  background: #1890ff !important;
  color: #fff !important;
  border-color: #1890ff !important;
}

.party-details {
  display: flex;
  flex-direction: column;
  gap: 4px;
  color: #333 !important;
}

.party-details strong,
.party-details div {
  color: #333 !important;
}

.party-passport {
  font-size: 13px;
  color: #666 !important;
}

.agreement-tabs .ant-tabs-nav {
  margin-bottom: 16px;
}

/* Мобильная адаптация */
@media (max-width: 768px) {
  .agreement-detail-container {
    padding: 12px;
  }

  .agreement-header-card .ant-card-body {
    padding: 12px;
  }

  .agreement-header-content {
    flex-direction: column;
    align-items: stretch;
  }

  .agreement-header-left {
    flex-direction: column;
    align-items: flex-start;
    gap: 12px;
  }

  .agreement-title {
    font-size: 16px;
    word-break: break-word;
  }

  .agreement-actions {
    width: 100%;
    justify-content: stretch;
  }

  .agreement-actions .ant-btn {
    flex: 1;
    min-width: 0;
  }

  .action-button-text {
    display: none;
  }

  .back-button-text {
    display: none;
  }

  .agreement-document-container {
    padding: 12px;
    border-radius: 4px;
  }

  .agreement-tabs .ant-table {
    font-size: 12px;
  }

  .agreement-tabs .ant-table-thead > tr > th,
  .agreement-tabs .ant-table-tbody > tr > td {
    padding: 8px 4px;
  }

  .party-card {
    margin-bottom: 8px;
  }

  .party-info {
    gap: 6px;
  }

  .party-details {
    font-size: 13px;
  }

  .party-passport {
    font-size: 12px;
  }

  .agreement-tabs .ant-tabs-tab {
    padding: 8px 12px;
    font-size: 13px;
  }

  .agreement-tabs .ant-tabs-nav {
    margin-bottom: 12px;
  }
}

@media (max-width: 480px) {
  .agreement-detail-container {
    padding: 8px;
  }

  .agreement-header-card .ant-card-body {
    padding: 8px;
  }

  .agreement-title {
    font-size: 14px;
  }

  .agreement-document-container {
    padding: 8px;
  }

  .agreement-tabs .ant-tabs-tab {
    padding: 6px 8px;
    font-size: 12px;
  }

  .agreement-tabs .ant-table-thead > tr > th:last-child,
  .agreement-tabs .ant-table-tbody > tr > td:last-child {
    display: none;
  }
}

/* Темная тема для деталей договора - ТОЛЬКО для системной темной темы */
@media (prefers-color-scheme: dark) {
  .agreement-detail-container {
    background: #141414;
  }

  .agreement-header-card,
  .agreement-details-card,
  .agreement-parties-card,
  .agreement-document-container {
    background: #1f1f1f;
    border-color: #303030;
  }

  .agreement-title,
  .agreement-detail-container .ant-descriptions-item-label,
  .agreement-detail-container .ant-descriptions-item-content {
    color: rgba(255, 255, 255, 0.85);
  }

  .agreement-detail-container .ant-descriptions-item-label {
    background: #141414;
  }

  .agreement-detail-container .ant-descriptions-item-content {
    background: #1f1f1f;
  }

  /* КРИТИЧНО: Темная тема для карточек сторон */
  .party-card {
    background: #141414 !important;
    border-color: #303030 !important;
  }

  .party-card .ant-card-body {
    background: #141414 !important;
    color: rgba(255, 255, 255, 0.85) !important;
  }

  .party-role .ant-tag {
    background: #1890ff !important;
    color: #fff !important;
    border-color: #1890ff !important;
  }

  .party-details {
    color: rgba(255, 255, 255, 0.85) !important;
  }

  .party-details strong,
  .party-details div {
    color: rgba(255, 255, 255, 0.85) !important;
  }

  .party-passport {
    color: rgba(255, 255, 255, 0.65) !important;
  }
}

/* Обертка для DocumentEditor */
.document-editor-wrapper {
  width: 100%;
  overflow: visible;
  box-sizing: border-box;
}

/* МОБИЛЬНАЯ ВЕРСИЯ - масштабирование с сохранением пропорций */
.document-editor-wrapper.mobile-zoom {
  width: 100%;
  overflow-x: auto;
  overflow-y: visible;
  -webkit-overflow-scrolling: touch;
  background: #f5f5f5;
  padding: 10px 5px;
  border-radius: 4px;
}

.document-editor-wrapper.mobile-zoom > div,
.document-editor-wrapper.mobile-zoom > * {
  zoom: 0.45;
  width: 793px;
  min-width: 793px;
  margin: 0 auto;
  transform-origin: top center;
}

@media (max-width: 768px) and (min-width: 426px) {
  .document-editor-wrapper.mobile-zoom > div,
  .document-editor-wrapper.mobile-zoom > * {
    zoom: 0.58;
  }
}

@media (max-width: 425px) and (min-width: 376px) {
  .document-editor-wrapper.mobile-zoom > div,
  .document-editor-wrapper.mobile-zoom > * {
    zoom: 0.50;
  }
}

@media (max-width: 375px) {
  .document-editor-wrapper.mobile-zoom > div,
  .document-editor-wrapper.mobile-zoom > * {
    zoom: 0.45;
  }
}

.document-editor-wrapper.mobile-zoom::-webkit-scrollbar {
  height: 6px;
}

.document-editor-wrapper.mobile-zoom::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

.document-editor-wrapper.mobile-zoom::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 3px;
}

.document-editor-wrapper.mobile-zoom::-webkit-scrollbar-thumb:hover {
  background: #555;
}

/* УПРОЩЕННЫЙ РЕЖИМ ПРОСМОТРА */
.agreement-simple-view {
  background: #1f1f1f;
  border-radius: 4px;
  padding: 0;
  width: 100%;
  box-sizing: border-box;
}

.agreement-simple-view .ql-container {
  border: 1px solid #303030 !important;
  border-radius: 4px;
  font-size: 14px;
  line-height: 1.8;
  color: rgba(255, 255, 255, 0.85);
  background: #1f1f1f;
}

.agreement-simple-view .ql-editor {
  padding: 20px;
  overflow-y: auto;
  max-height: 600px;
  word-wrap: break-word;
  overflow-wrap: break-word;
  color: rgba(255, 255, 255, 0.85);
  font-size: 14px;
  line-height: 1.8;
}

/* КРИТИЧНО: Стили для HTML элементов внутри редактора */
.agreement-simple-view .ql-editor h1 {
  font-size: 24px !important;
  font-weight: 700 !important;
  margin: 20px 0 12px 0 !important;
  color: rgba(255, 255, 255, 0.95) !important;
  line-height: 1.3 !important;
  display: block !important;
}

.agreement-simple-view .ql-editor h2 {
  font-size: 20px !important;
  font-weight: 700 !important;
  margin: 18px 0 10px 0 !important;
  color: rgba(255, 255, 255, 0.95) !important;
  line-height: 1.3 !important;
  background: #4a5568 !important;
  padding: 8px 12px !important;
  border-radius: 4px !important;
  display: block !important;
}

.agreement-simple-view .ql-editor h3 {
  font-size: 16px !important;
  font-weight: 700 !important;
  margin: 16px 0 8px 0 !important;
  color: rgba(255, 255, 255, 0.95) !important;
  line-height: 1.3 !important;
  background: #4a5568 !important;
  padding: 6px 10px !important;
  border-radius: 4px !important;
  display: block !important;
}

.agreement-simple-view .ql-editor p {
  margin: 0 0 16px 0 !important;
  line-height: 1.8 !important;
  color: rgba(255, 255, 255, 0.85) !important;
  text-align: justify !important;
  display: block !important;
  white-space: normal !important;
}

.agreement-simple-view .ql-editor ul,
.agreement-simple-view .ql-editor ol {
  margin: 12px 0 16px 0 !important;
  padding-left: 28px !important;
  display: block !important;
}

.agreement-simple-view .ql-editor li {
  margin: 8px 0 !important;
  line-height: 1.6 !important;
  color: rgba(255, 255, 255, 0.85) !important;
  display: list-item !important;
}

.agreement-simple-view .ql-editor strong,
.agreement-simple-view .ql-editor b {
  font-weight: 700 !important;
  color: rgba(255, 255, 255, 0.95) !important;
}

.agreement-simple-view .ql-editor em,
.agreement-simple-view .ql-editor i {
  font-style: italic !important;
}

.agreement-simple-view .ql-editor u {
  text-decoration: underline !important;
}

.agreement-simple-view .ql-editor a {
  color: #1890ff !important;
  text-decoration: underline !important;
}

.agreement-simple-view .ql-editor a:hover {
  color: #40a9ff !important;
}

/* Toolbar для редактирования */
.agreement-simple-view .ql-toolbar {
  background: #2a2a2a !important;
  border: 1px solid #303030 !important;
  border-radius: 4px 4px 0 0 !important;
  display: flex !important;
  flex-wrap: wrap !important;
  padding: 8px !important;
}

.agreement-simple-view .ql-toolbar .ql-stroke {
  stroke: rgba(255, 255, 255, 0.85) !important;
}

.agreement-simple-view .ql-toolbar .ql-fill {
  fill: rgba(255, 255, 255, 0.85) !important;
}

.agreement-simple-view .ql-toolbar .ql-picker-label {
  color: rgba(255, 255, 255, 0.85) !important;
}

.agreement-simple-view .ql-toolbar button {
  width: auto !important;
  height: auto !important;
  padding: 4px 6px !important;
}

.agreement-simple-view .ql-toolbar .ql-picker {
  color: rgba(255, 255, 255, 0.85) !important;
}

.agreement-simple-view .ql-toolbar .ql-picker-options {
  background: #2a2a2a !important;
  border: 1px solid #303030 !important;
}

.agreement-simple-view .ql-toolbar .ql-picker-item {
  color: rgba(255, 255, 255, 0.85) !important;
}

.agreement-simple-view .ql-toolbar .ql-picker-item:hover {
  background: #3a3a3a !important;
}

.agreement-simple-view .ql-container.ql-snow {
  border-radius: 0 0 4px 4px !important;
}

/* Мобильная версия */
.agreement-simple-view.mobile-view .ql-editor {
  padding: 12px;
  font-size: 13px;
  max-height: 500px;
}

.agreement-simple-view.mobile-view .ql-editor h1 {
  font-size: 20px !important;
}

.agreement-simple-view.mobile-view .ql-editor h2 {
  font-size: 18px !important;
  padding: 6px 10px !important;
}

.agreement-simple-view.mobile-view .ql-editor h3 {
  font-size: 16px !important;
  padding: 4px 8px !important;
}

.agreement-simple-view.mobile-view .ql-editor p {
  font-size: 13px !important;
  margin-bottom: 12px !important;
}

.agreement-simple-view.mobile-view .ql-editor ul,
.agreement-simple-view.mobile-view .ql-editor ol {
  padding-left: 20px !important;
}

@media (max-width: 480px) {
  .agreement-simple-view.mobile-view .ql-editor {
    padding: 8px;
    font-size: 12px;
  }

  .agreement-simple-view.mobile-view .ql-editor h1 {
    font-size: 18px !important;
  }

  .agreement-simple-view.mobile-view .ql-editor h2 {
    font-size: 16px !important;
    padding: 4px 8px !important;
  }

  .agreement-simple-view.mobile-view .ql-editor h3 {
    font-size: 14px !important;
    padding: 3px 6px !important;
  }

  .agreement-simple-view.mobile-view .ql-editor p {
    font-size: 12px !important;
    margin-bottom: 10px !important;
  }

  .agreement-simple-view .ql-toolbar {
    padding: 4px !important;
  }

  .agreement-simple-view .ql-toolbar button {
    padding: 2px 4px !important;
  }
}

.agreement-simple-view .ql-editor.ql-blank::before {
  color: rgba(255, 255, 255, 0.45);
  font-style: italic;
}

.agreement-simple-view .ql-editor:focus {
  outline: none;
}

.agreement-simple-view .ql-editor::-webkit-scrollbar {
  width: 8px;
}

.agreement-simple-view .ql-editor::-webkit-scrollbar-track {
  background: #141414;
  border-radius: 4px;
}

.agreement-simple-view .ql-editor::-webkit-scrollbar-thumb {
  background: #303030;
  border-radius: 4px;
}

.agreement-simple-view .ql-editor::-webkit-scrollbar-thumb:hover {
  background: #404040;
}

/* Убираем лишние отступы */
@media (max-width: 768px) {
  .agreement-document-container {
    padding: 0;
  }
}

/* Адаптация таблицы подписей для мобильных */
@media (max-width: 768px) {
  .ant-table-wrapper .ant-table {
    font-size: 12px;
  }

  .ant-table-wrapper .ant-table-thead > tr > th,
  .ant-table-wrapper .ant-table-tbody > tr > td {
    padding: 8px 4px;
  }

  /* Скрываем некоторые колонки на мобильных */
  .ant-table-wrapper .ant-table-thead > tr > th:nth-child(4),
  .ant-table-wrapper .ant-table-tbody > tr > td:nth-child(4),
  .ant-table-wrapper .ant-table-thead > tr > th:nth-child(5),
  .ant-table-wrapper .ant-table-tbody > tr > td:nth-child(5),
  .ant-table-wrapper .ant-table-thead > tr > th:nth-child(6),
  .ant-table-wrapper .ant-table-tbody > tr > td:nth-child(6) {
    display: none;
  }

  /* Адаптация expandable row */
  .ant-table-expanded-row > .ant-table-cell {
    padding: 12px 8px !important;
  }

  .ant-table-expanded-row .ant-row {
    margin: 0 -4px;
  }

  .ant-table-expanded-row .ant-col {
    padding: 0 4px;
  }

  .ant-table-expanded-row .ant-card {
    margin-bottom: 8px;
  }

  .ant-table-expanded-row .ant-card-head {
    padding: 8px 12px;
    min-height: auto;
  }

  .ant-table-expanded-row .ant-card-head-title {
    font-size: 13px;
  }

  .ant-table-expanded-row .ant-card-body {
    padding: 12px;
  }
}

/* Темная тема для модального окна детальной информации */
.signature-detail-modal-dark .ant-modal-content {
  background: #141414;
}

.signature-detail-modal-dark .ant-modal-header {
  background: #141414;
  border-bottom-color: #303030;
}

.signature-detail-modal-dark .ant-modal-title {
  color: rgba(255, 255, 255, 0.85);
}

.signature-detail-modal-dark .ant-modal-close {
  color: rgba(255, 255, 255, 0.45);
}

.signature-detail-modal-dark .ant-card {
  background: #1f1f1f;
  border-color: #303030;
}

.signature-detail-modal-dark .ant-card-head {
  background: #1f1f1f;
  border-bottom-color: #303030;
}

.signature-detail-modal-dark .ant-card-head-title {
  color: rgba(255, 255, 255, 0.85);
}

.signature-detail-modal-dark .ant-card-body {
  background: #1f1f1f;
}

/* Стиль для кликабельных строк на мобильных */
@media (max-width: 768px) {
  .ant-table-tbody > tr {
    cursor: pointer;
    transition: background-color 0.3s;
  }
  
  .ant-table-tbody > tr:hover {
    background-color: #262626 !important;
  }
  
  .ant-table-tbody > tr:active {
    background-color: #303030 !important;
  }
}

/* Мобильная адаптация кнопки уведомления агента */
@media (max-width: 768px) {
  .agreement-actions {
    width: 100%;
  }

  .agreement-actions .action-button {
    flex: 1;
    min-width: 0;
  }

  .agreement-actions .action-button .action-button-text {
    display: none;
  }

  .agreement-actions .action-button {
    padding: 4px 8px;
  }
}

/* Зеленая кнопка для уведомления */
.ant-btn-primary[style*="background: rgb(82, 196, 26)"] {
  box-shadow: 0 2px 4px rgba(82, 196, 26, 0.3);
}

.ant-btn-primary[style*="background: rgb(82, 196, 26)"]:hover {
  background: #73d13d !important;
  border-color: #73d13d !important;
}
/* AI Editor Modal */
.ai-editor-modal .ant-modal-content {
  background: #141414 !important;
  border: 1px solid #303030 !important;
  padding: 0 !important;
  height: calc(100vh - 100px);
}

.ai-editor-modal .ant-modal-body {
  background: #141414 !important;
  height: 100%;
  padding: 0 !important;
}

.ai-editor-modal .ant-modal-close {
  color: rgba(255, 255, 255, 0.65) !important;
}

.ai-editor-modal .ant-modal-close:hover {
  color: rgba(255, 255, 255, 0.85) !important;
  background: rgba(255, 255, 255, 0.1) !important;
}